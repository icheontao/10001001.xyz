<?xml version="1.0" encoding="utf-8"?><rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Icheon Tao's Blog</title><link>https://10001001.xyz/</link><description>Tao's Blog. 记录个人生活和技术.</description><generator>Hugo 0.85.0 https://gohugo.io/</generator><language>zh-CN</language><managingEditor>icheontao@gmail.com (Icheon Tao)</managingEditor><webMaster>icheontao@gmail.com (Icheon Tao)</webMaster><copyright>本文在保留作者及链接的前提下，非商业用途随意转载分享。</copyright><lastBuildDate>Thu, 22 Jul 2021 15:03:26 +0000</lastBuildDate><atom:link rel="self" type="application/rss+xml" href="https://10001001.xyz/rss.xml"/><item><title>使用Python添加PNG图片隐藏块(隐写字符串)</title><link>https://10001001.xyz/programming/add_png_chunks_with_python/</link><guid isPermaLink="true">https://10001001.xyz/programming/add_png_chunks_with_python/</guid><pubDate>Thu, 22 Jul 2021 22:26:35 +0800</pubDate><author>icheontao@gmail.com (Icheon Tao)</author><copyright>本文在保留作者及链接的前提下，非商业用途随意转载分享。</copyright><description>&lt;p>最近想批量给PNG图片添加一些隐藏标识，所以google一番，这里记录一下。&lt;/p>
&lt;p>首先是了解PNG文件格式结构&lt;a href="https://10001001.xyz/programming/add_png_chunks_with_python/#refer-anchor">&lt;sup>1&lt;/sup>&lt;/a>，PNG数据块Chunk主要是有&lt;code>IHDR&lt;/code>、&lt;code>IDAT&lt;/code>和&lt;code>IEND&lt;/code>组成(缺一不可)&lt;/p>
&lt;p>本篇的主角&lt;code>tEXt&lt;/code>和&lt;code>zTXt&lt;/code>数据块：
- &lt;code>tEXt&lt;/code>: 文本信息数据块 [可选] 所在PNG文件结构的位置无限制
- &lt;code>zTXt&lt;/code>: 压缩文本数据块 [可选] 所在PNG文件结构的位置无限制&lt;/p>
&lt;p>由于是只处理PNG图片，这里用到是&lt;code>PyPNG&lt;/code>模块，该项目Github可访问&lt;a href="https://github.com/drj11/pypng">drj11/pypng&lt;/a>&lt;/p>
&lt;p>这里使用下面这张图片来测试
&lt;img src="imags/ivan-rudoy-Ot90TwQGAeE-unsplash.png" alt="ivan-rudoy-Ot90TwQGAeE-unsplash">&lt;/p>
&lt;p>使用的代码如下：&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;span class="kn">import&lt;/span> &lt;span class="nn">zlib&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">random&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">binascii&lt;/span>
&lt;span class="kn">from&lt;/span> &lt;span class="nn">typing&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">List&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">png&lt;/span>
&lt;span class="k">def&lt;/span> &lt;span class="nf">add_text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">src_img_path&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dest_img_path&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">contents&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">is_compress&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">bool&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="n">reader&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">png&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Reader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">src_img_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 返回图片chunks迭代器并转化为列表&lt;/span>
&lt;span class="n">chunks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">reader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">chunks&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="k">for&lt;/span> &lt;span class="n">content&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">contents&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="c1"># 将其转化为bytes&lt;/span>
&lt;span class="n">content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">encode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;utf-8&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="n">is_compress&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="n">add_chunk&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">tuple&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="sa">b&lt;/span>&lt;span class="s1">&amp;#39;zTXt&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">zlib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)])&lt;/span>
&lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="n">add_chunk&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">tuple&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="sa">b&lt;/span>&lt;span class="s1">&amp;#39;tEXt&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># PNG格式中chunk的第一个(IHDR)和最后一个(IEND)固定，所以我们可以随机生成一个索引&lt;/span>
&lt;span class="n">chunks&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">randint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chunks&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">add_chunk&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dest_img_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;wb&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">dest_file&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="n">png&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write_chunks&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dest_file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">chunks&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">def&lt;/span> &lt;span class="nf">cat_text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">src_img&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="n">reader&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">png&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Reader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">src_img&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">chunks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">reader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">chunks&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">chunks&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="sa">b&lt;/span>&lt;span class="s1">&amp;#39;zTXt&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">decode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;utf-8&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">zlib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">decompress&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">decode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;utf-8&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="sa">b&lt;/span>&lt;span class="s1">&amp;#39;tEXt&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">decode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;utf-8&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">decode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;utf-8&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">errors&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;ignore&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">def&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="n">src_img_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;./test1.png&amp;#34;&lt;/span>
&lt;span class="n">dest_img_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;./test1_res.png&amp;#34;&lt;/span>
&lt;span class="c1"># 需要隐写的内容&lt;/span>
&lt;span class="n">content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;This is a test1 content&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;This is a test2 content&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">add_text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">src_img_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dest_img_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 如需要查看PNG图片中是否含有`tEXt`和`zTXt`文本相关的数据块&lt;/span>
&lt;span class="c1"># cat_text(dest_img_path)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;__main__&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="n">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="简单展示下text和ztxt数据块在png文件里的区别">简单展示下&lt;code>tEXt&lt;/code>和&lt;code>zTXt&lt;/code>数据块在PNG文件里的区别&lt;/h4>
&lt;ul>
&lt;li>tEXt
&lt;ol>
&lt;li>使用&lt;code>tEXt&lt;/code>，hexdump隐写后的PNG图片&lt;code>hexdump -C test1_res.png &amp;gt; /var/tmp/11&lt;/code>&lt;/li>
&lt;li>查询关键字&lt;code>tEXt&lt;/code>，使用命令&lt;code>grep -C5 &amp;quot;tEXt&amp;quot; /var/tmp/11&lt;/code>，如下输出：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">000cffb0 f5 c3 af 5f &lt;span class="m">35&lt;/span> &lt;span class="m">83&lt;/span> &lt;span class="m">75&lt;/span> c5 2b 1e f7 5d 5f d6 c4 &lt;span class="m">47&lt;/span> &lt;span class="p">|&lt;/span>..._5.u.+..&lt;span class="o">]&lt;/span>_..G&lt;span class="p">|&lt;/span>
000cffc0 5f 3c 2d &lt;span class="m">75&lt;/span> cb f7 d0 &lt;span class="m">07&lt;/span> df e6 d3 2e f6 &lt;span class="m">04&lt;/span> da e5 &lt;span class="p">|&lt;/span>_&amp;lt;-u............&lt;span class="p">|&lt;/span>
000cffd0 &lt;span class="m">84&lt;/span> f6 bb 9c &lt;span class="m">62&lt;/span> 7c b8 &lt;span class="nb">cd&lt;/span> ed &lt;span class="m">11&lt;/span> &lt;span class="m">88&lt;/span> 2d f4 fd &lt;span class="m">55&lt;/span> dd &lt;span class="p">|&lt;/span>....b&lt;span class="p">|&lt;/span>.....-..U.&lt;span class="p">|&lt;/span>
000cffe0 af b0 f9 d5 a8 a7 ae &lt;span class="m">91&lt;/span> 7b &lt;span class="m">81&lt;/span> 6e &lt;span class="m">73&lt;/span> 3d e4 ab ef &lt;span class="p">|&lt;/span>........&lt;span class="o">{&lt;/span>.ns&lt;span class="o">=&lt;/span>...&lt;span class="p">|&lt;/span>
000cfff0 d0 7e d0 e2 6b cf ec 1b ec 1a e4 ef &lt;span class="m">35&lt;/span> &lt;span class="m">59&lt;/span> 0e 5e &lt;span class="p">|&lt;/span>.~..k.......5Y.^&lt;span class="p">|&lt;/span>
000d0000 b7 &lt;span class="m">04&lt;/span> f0 6f &lt;span class="m">00&lt;/span> &lt;span class="m">00&lt;/span> &lt;span class="m">00&lt;/span> &lt;span class="m">17&lt;/span> &lt;span class="m">74&lt;/span> &lt;span class="m">45&lt;/span> &lt;span class="m">58&lt;/span> &lt;span class="m">74&lt;/span> &lt;span class="m">54&lt;/span> &lt;span class="m">68&lt;/span> &lt;span class="m">69&lt;/span> &lt;span class="m">73&lt;/span> &lt;span class="p">|&lt;/span>...o....tEXtThis&lt;span class="p">|&lt;/span>
000d0010 &lt;span class="m">20&lt;/span> &lt;span class="m">69&lt;/span> &lt;span class="m">73&lt;/span> &lt;span class="m">20&lt;/span> &lt;span class="m">61&lt;/span> &lt;span class="m">20&lt;/span> &lt;span class="m">74&lt;/span> &lt;span class="m">65&lt;/span> &lt;span class="m">73&lt;/span> &lt;span class="m">74&lt;/span> &lt;span class="m">31&lt;/span> &lt;span class="m">20&lt;/span> &lt;span class="m">63&lt;/span> 6f 6e &lt;span class="m">74&lt;/span> &lt;span class="p">|&lt;/span> is a test1 cont&lt;span class="p">|&lt;/span>
000d0020 &lt;span class="m">65&lt;/span> 6e &lt;span class="m">74&lt;/span> ab ab &lt;span class="m">44&lt;/span> d9 &lt;span class="m">00&lt;/span> &lt;span class="m">00&lt;/span> ff f4 &lt;span class="m">49&lt;/span> &lt;span class="m">44&lt;/span> &lt;span class="m">41&lt;/span> &lt;span class="m">54&lt;/span> d8 &lt;span class="p">|&lt;/span>ent..D.....IDAT.&lt;span class="p">|&lt;/span>
000d0030 b8 3d &lt;span class="m">59&lt;/span> 6c 5f 9b af &lt;span class="m">46&lt;/span> fe e6 ef 6a &lt;span class="m">15&lt;/span> 5b &lt;span class="m">14&lt;/span> &lt;span class="m">93&lt;/span> &lt;span class="p">|&lt;/span>.&lt;span class="o">=&lt;/span>Yl_..F...j.&lt;span class="o">[&lt;/span>..&lt;span class="p">|&lt;/span>
000d0040 b3 f9 8d 6a ae 2f &lt;span class="nb">cd&lt;/span> &lt;span class="m">46&lt;/span> 5a &lt;span class="nb">cd&lt;/span> db bb d0 1c f7 ac &lt;span class="p">|&lt;/span>...j./.FZ.......&lt;span class="p">|&lt;/span>
000d0050 ff &lt;span class="m">14&lt;/span> 6b 5e bc 3d b5 7f ae &lt;span class="m">81&lt;/span> 3d 2d 5e ad &lt;span class="nb">fc&lt;/span> d5 &lt;span class="p">|&lt;/span>..k^.&lt;span class="o">=&lt;/span>....&lt;span class="o">=&lt;/span>-^...&lt;span class="p">|&lt;/span>
--
003effd0 &lt;span class="m">49&lt;/span> &lt;span class="nb">fc&lt;/span> fe e7 9f c6 3f fe f2 f3 f8 dd 2f 3e 8b af &lt;span class="p">|&lt;/span>I.....?...../&amp;gt;..&lt;span class="p">|&lt;/span>
003effe0 3f bf &lt;span class="m">13&lt;/span> 5f 3d f8 &lt;span class="m">38&lt;/span> 7e fd 8b 6f e3 &lt;span class="m">97&lt;/span> bf f8 2e &lt;span class="p">|&lt;/span>?.._&lt;span class="o">=&lt;/span>.8~..o.....&lt;span class="p">|&lt;/span>
003efff0 7e fe f3 ef e3 &lt;span class="m">57&lt;/span> bf fa &lt;span class="m">45&lt;/span> &lt;span class="nb">fc&lt;/span> fd df ff &lt;span class="m">36&lt;/span> 7e fd &lt;span class="p">|&lt;/span>~....W..E....6~.&lt;span class="p">|&lt;/span>
003f0000 db 5f c5 &lt;span class="m">27&lt;/span> 5f 7d 1e af df ba 1d &lt;span class="m">67&lt;/span> df b8 &lt;span class="m">11&lt;/span> e7 &lt;span class="p">|&lt;/span>._.&lt;span class="s1">&amp;#39;_}.....g....|
&lt;/span>&lt;span class="s1">003f0010 df b9 1b 27 ae 7f 1a 07 41 73 3f 2f cf d0 fc 23 |...&amp;#39;&lt;/span>....As?/...#&lt;span class="p">|&lt;/span>
003f0020 8c e6 9e &lt;span class="m">74&lt;/span> &lt;span class="m">24&lt;/span> de ce &lt;span class="m">00&lt;/span> &lt;span class="m">00&lt;/span> &lt;span class="m">00&lt;/span> &lt;span class="m">17&lt;/span> &lt;span class="m">74&lt;/span> &lt;span class="m">45&lt;/span> &lt;span class="m">58&lt;/span> &lt;span class="m">74&lt;/span> &lt;span class="m">54&lt;/span> &lt;span class="p">|&lt;/span>...t$......tEXtT&lt;span class="p">|&lt;/span>
003f0030 &lt;span class="m">68&lt;/span> &lt;span class="m">69&lt;/span> &lt;span class="m">73&lt;/span> &lt;span class="m">20&lt;/span> &lt;span class="m">69&lt;/span> &lt;span class="m">73&lt;/span> &lt;span class="m">20&lt;/span> &lt;span class="m">61&lt;/span> &lt;span class="m">20&lt;/span> &lt;span class="m">74&lt;/span> &lt;span class="m">65&lt;/span> &lt;span class="m">73&lt;/span> &lt;span class="m">74&lt;/span> &lt;span class="m">32&lt;/span> &lt;span class="m">20&lt;/span> &lt;span class="m">63&lt;/span> &lt;span class="p">|&lt;/span>his is a test2 c&lt;span class="p">|&lt;/span>
003f0040 6f 6e &lt;span class="m">74&lt;/span> &lt;span class="m">65&lt;/span> 6e &lt;span class="m">74&lt;/span> &lt;span class="m">92&lt;/span> &lt;span class="m">26&lt;/span> &lt;span class="m">78&lt;/span> 1c &lt;span class="m">00&lt;/span> &lt;span class="m">00&lt;/span> ff f4 &lt;span class="m">49&lt;/span> &lt;span class="m">44&lt;/span> &lt;span class="p">|&lt;/span>ontent.&lt;span class="p">&amp;amp;&lt;/span>x.....ID&lt;span class="p">|&lt;/span>
003f0050 &lt;span class="m">41&lt;/span> &lt;span class="m">54&lt;/span> b1 e7 3a cf 5f &lt;span class="nb">cd&lt;/span> 3d e3 dd &lt;span class="m">66&lt;/span> dc dc f7 &lt;span class="m">24&lt;/span> &lt;span class="p">|&lt;/span>AT..:._.&lt;span class="o">=&lt;/span>..f...$&lt;span class="p">|&lt;/span>
003f0060 &lt;span class="m">66&lt;/span> f1 &lt;span class="nb">fc&lt;/span> &lt;span class="m">27&lt;/span> &lt;span class="m">31&lt;/span> cb ef &lt;span class="m">74&lt;/span> 8c b9 &lt;span class="m">17&lt;/span> &lt;span class="m">15&lt;/span> &lt;span class="m">02&lt;/span> &lt;span class="m">57&lt;/span> &lt;span class="m">73&lt;/span> df &lt;span class="p">|&lt;/span>f..&lt;span class="err">&amp;#39;&lt;/span>1..t.....Ws.&lt;span class="p">|&lt;/span>
003f0070 3f 7c f3 &lt;span class="m">41&lt;/span> c1 be eb f7 7a f7 &lt;span class="m">53&lt;/span> f4 c4 f5 9e c7 &lt;span class="p">|&lt;/span>?&lt;span class="p">|&lt;/span>.A....z.S.....&lt;span class="p">|&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>如上输出隐写后的&lt;code>tEXt&lt;/code>的数据&lt;code>&amp;quot;This is a test1 content&amp;quot;, &amp;quot;This is a test2 content&amp;quot;&lt;/code>相关字符串为&lt;strong>明文&lt;/strong>&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>zTXt
&lt;ol>
&lt;li>使用&lt;code>zTXt&lt;/code>，步骤上1&lt;/li>
&lt;li>查找关键字&lt;code>zTXt&lt;/code>，命令&lt;code>grep -C5 &amp;quot;zTXt&amp;quot; /var/tmp/11&lt;/code>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">0020ffb0 bf 7c 6e d3 2f de 5a 9c &lt;span class="m">97&lt;/span> &lt;span class="nb">fc&lt;/span> 5f e7 &lt;span class="nb">fc&lt;/span> &lt;span class="m">36&lt;/span> be 5f &lt;span class="p">|&lt;/span>.&lt;span class="p">|&lt;/span>n./.Z..._..6._&lt;span class="p">|&lt;/span>
0020ffc0 cc fa e0 7e bf ac &lt;span class="m">13&lt;/span> 3e f5 be f3 8a 7f f6 &lt;span class="m">67&lt;/span> 8d &lt;span class="p">|&lt;/span>...~...&amp;gt;......g.&lt;span class="p">|&lt;/span>
0020ffd0 d9 fd &lt;span class="m">19&lt;/span> b2 &lt;span class="m">35&lt;/span> ad &lt;span class="m">15&lt;/span> df d9 df &lt;span class="m">33&lt;/span> cf d7 c5 &lt;span class="m">80&lt;/span> fb &lt;span class="p">|&lt;/span>....5.....3.....&lt;span class="p">|&lt;/span>
0020ffe0 7d f2 ca f9 ac &lt;span class="m">03&lt;/span> 8f ba 9f c8 9f af &lt;span class="m">31&lt;/span> 2d 7c f3 &lt;span class="p">|&lt;/span>&lt;span class="o">}&lt;/span>...........1-&lt;span class="p">|&lt;/span>.&lt;span class="p">|&lt;/span>
0020fff0 9e f1 fd ec 2d 8a df e7 ef e2 fb 0f 9a 3e ed e6 &lt;span class="p">|&lt;/span>....-........&amp;gt;..&lt;span class="p">|&lt;/span>
&lt;span class="m">00210000&lt;/span> &lt;span class="m">36&lt;/span> &lt;span class="m">49&lt;/span> &lt;span class="m">35&lt;/span> a0 &lt;span class="m">00&lt;/span> &lt;span class="m">00&lt;/span> &lt;span class="m">00&lt;/span> 1d 7a &lt;span class="m">54&lt;/span> &lt;span class="m">58&lt;/span> &lt;span class="m">74&lt;/span> &lt;span class="m">78&lt;/span> 9c 0b c9 &lt;span class="p">|&lt;/span>6I5.....zTXtx...&lt;span class="p">|&lt;/span>
&lt;span class="m">00210010&lt;/span> c8 2c &lt;span class="m">56&lt;/span> &lt;span class="m">00&lt;/span> a2 &lt;span class="m">44&lt;/span> &lt;span class="m">85&lt;/span> &lt;span class="m">92&lt;/span> d4 e2 &lt;span class="m">12&lt;/span> &lt;span class="m">23&lt;/span> &lt;span class="m">85&lt;/span> e4 &lt;span class="nb">fc&lt;/span> bc &lt;span class="p">|&lt;/span>.,V..D.....#....&lt;span class="p">|&lt;/span>
&lt;span class="m">00210020&lt;/span> &lt;span class="m">92&lt;/span> d4 bc &lt;span class="m">12&lt;/span> &lt;span class="m">00&lt;/span> 5f 9f &lt;span class="m">08&lt;/span> &lt;span class="m">43&lt;/span> &lt;span class="m">26&lt;/span> &lt;span class="m">51&lt;/span> &lt;span class="m">68&lt;/span> b8 &lt;span class="m">00&lt;/span> &lt;span class="m">00&lt;/span> ff &lt;span class="p">|&lt;/span>....._..C&lt;span class="p">&amp;amp;&lt;/span>Qh....&lt;span class="p">|&lt;/span>
&lt;span class="m">00210030&lt;/span> f4 &lt;span class="m">49&lt;/span> &lt;span class="m">44&lt;/span> &lt;span class="m">41&lt;/span> &lt;span class="m">54&lt;/span> 7c a1 1f ac 2d fa &lt;span class="m">61&lt;/span> e0 c2 3f &lt;span class="m">30&lt;/span> &lt;span class="p">|&lt;/span>.IDAT&lt;span class="p">|&lt;/span>...-.a..?0&lt;span class="p">|&lt;/span>
&lt;span class="m">00210040&lt;/span> fb &lt;span class="m">21&lt;/span> e1 fe &lt;span class="m">80&lt;/span> a9 1f &lt;span class="m">28&lt;/span> 5d fe &lt;span class="m">85&lt;/span> 1f 6e 3d f9 f8 &lt;span class="p">|&lt;/span>.!.....&lt;span class="o">(]&lt;/span>...n&lt;span class="o">=&lt;/span>..&lt;span class="p">|&lt;/span>
&lt;span class="m">00210050&lt;/span> d7 5e 7c 8b 7d ac f3 &lt;span class="m">03&lt;/span> 4f &lt;span class="m">17&lt;/span> b3 5e e7 fd &lt;span class="m">89&lt;/span> f6 &lt;span class="p">|&lt;/span>.^&lt;span class="p">|&lt;/span>.&lt;span class="o">}&lt;/span>...O..^....&lt;span class="p">|&lt;/span>
--
004fffe0 5f 1c &lt;span class="m">92&lt;/span> c2 0f e0 1a af &lt;span class="m">46&lt;/span> d1 9a &lt;span class="m">40&lt;/span> c7 f8 a9 c3 &lt;span class="p">|&lt;/span>_.......F..@....&lt;span class="p">|&lt;/span>
004ffff0 &lt;span class="m">39&lt;/span> &lt;span class="m">18&lt;/span> 5f ae 7d ec f8 e5 aa 4d 2b d4 &lt;span class="m">28&lt;/span> 5c &lt;span class="m">33&lt;/span> d7 &lt;span class="p">|&lt;/span>9._.&lt;span class="o">}&lt;/span>....M+.&lt;span class="o">(&lt;/span>&lt;span class="se">\3&lt;/span>.&lt;span class="p">|&lt;/span>
&lt;span class="m">00500000&lt;/span> d6 eb a2 &lt;span class="nb">cd&lt;/span> 7b &lt;span class="m">10&lt;/span> 1e eb cc &lt;span class="m">98&lt;/span> 7e ff dd &lt;span class="m">51&lt;/span> &lt;span class="m">43&lt;/span> &lt;span class="m">68&lt;/span> &lt;span class="p">|&lt;/span>....&lt;span class="o">{&lt;/span>.....~..QCh&lt;span class="p">|&lt;/span>
&lt;span class="m">00500010&lt;/span> f3 fe &lt;span class="m">13&lt;/span> bd &lt;span class="m">66&lt;/span> d3 &lt;span class="m">86&lt;/span> ae 3e &lt;span class="m">75&lt;/span> ec d3 ee d7 &lt;span class="m">74&lt;/span> &lt;span class="m">83&lt;/span> &lt;span class="p">|&lt;/span>....f...&amp;gt;u....t.&lt;span class="p">|&lt;/span>
&lt;span class="m">00500020&lt;/span> b6 7b de ac &lt;span class="m">95&lt;/span> &lt;span class="m">73&lt;/span> &lt;span class="m">76&lt;/span> ec &lt;span class="m">35&lt;/span> &lt;span class="m">18&lt;/span> &lt;span class="m">30&lt;/span> 5f b4 &lt;span class="m">00&lt;/span> &lt;span class="m">00&lt;/span> &lt;span class="m">00&lt;/span> &lt;span class="p">|&lt;/span>.&lt;span class="o">{&lt;/span>...sv.5.0_....&lt;span class="p">|&lt;/span>
&lt;span class="m">00500030&lt;/span> 1d 7a &lt;span class="m">54&lt;/span> &lt;span class="m">58&lt;/span> &lt;span class="m">74&lt;/span> &lt;span class="m">78&lt;/span> 9c 0b c9 c8 2c &lt;span class="m">56&lt;/span> &lt;span class="m">00&lt;/span> a2 &lt;span class="m">44&lt;/span> &lt;span class="m">85&lt;/span> &lt;span class="p">|&lt;/span>.zTXtx....,V..D.&lt;span class="p">|&lt;/span>
&lt;span class="m">00500040&lt;/span> &lt;span class="m">92&lt;/span> d4 e2 &lt;span class="m">12&lt;/span> &lt;span class="m">43&lt;/span> &lt;span class="m">85&lt;/span> e4 &lt;span class="nb">fc&lt;/span> bc &lt;span class="m">92&lt;/span> d4 bc &lt;span class="m">12&lt;/span> &lt;span class="m">00&lt;/span> 5f &lt;span class="m">96&lt;/span> &lt;span class="p">|&lt;/span>....C........._.&lt;span class="p">|&lt;/span>
&lt;span class="m">00500050&lt;/span> &lt;span class="m">08&lt;/span> &lt;span class="m">42&lt;/span> d2 5a ec &lt;span class="m">88&lt;/span> &lt;span class="m">00&lt;/span> &lt;span class="m">00&lt;/span> ff f4 &lt;span class="m">49&lt;/span> &lt;span class="m">44&lt;/span> &lt;span class="m">41&lt;/span> &lt;span class="m">54&lt;/span> &lt;span class="m">14&lt;/span> ae &lt;span class="p">|&lt;/span>.B.Z......IDAT..&lt;span class="p">|&lt;/span>
&lt;span class="m">00500060&lt;/span> &lt;span class="m">15&lt;/span> &lt;span class="m">80&lt;/span> b7 af 4f 6a 6a 5e d7 a7 eb af &lt;span class="m">06&lt;/span> &lt;span class="m">71&lt;/span> de &lt;span class="m">37&lt;/span> &lt;span class="p">|&lt;/span>....Ojj^.....q.7&lt;span class="p">|&lt;/span>
&lt;span class="m">00500070&lt;/span> f2 &lt;span class="m">85&lt;/span> 1a ce 7f e6 &lt;span class="m">76&lt;/span> 5c db &lt;span class="m">84&lt;/span> b5 ed f5 2d f8 d3 &lt;span class="p">|&lt;/span>......v&lt;span class="se">\.&lt;/span>....-..&lt;span class="p">|&lt;/span>
&lt;span class="m">00500080&lt;/span> &lt;span class="m">46&lt;/span> 6b ad ab 7b f7 0a be &lt;span class="m">27&lt;/span> 7a &lt;span class="m">73&lt;/span> d8 &lt;span class="m">21&lt;/span> e8 c1 &lt;span class="m">18&lt;/span> &lt;span class="p">|&lt;/span>Fk..&lt;span class="o">{&lt;/span>...&lt;span class="err">&amp;#39;&lt;/span>zs.!...&lt;span class="p">|&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>如上输出隐写后的&lt;code>zTXt&lt;/code>的数据&lt;code>&amp;quot;This is a test1 content&amp;quot;, &amp;quot;This is a test2 content&amp;quot;&lt;/code>相关字符串为&lt;strong>密文&lt;/strong>&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;div id="refer-anchor">&lt;/div>
&lt;h4 id="参考文章">参考文章：&lt;/h4>
&lt;p>[1] &lt;a href="https://blog.csdn.net/hherima/article/details/45846901">PNG文件格式&lt;/a>&lt;/p>
&lt;p>[2] &lt;a href="https://pypng.readthedocs.io/en/latest/">PyPNG documentation&lt;/a>&lt;/p>
&lt;p>Enjoy.&lt;/p></description><category domain="https://10001001.xyz/programming/">programming</category><category domain="https://10001001.xyz/tags/%E7%BC%96%E7%A8%8B/">编程</category><category domain="https://10001001.xyz/tags/python/">Python</category><category domain="https://10001001.xyz/tags/steganography/">Steganography</category><category domain="https://10001001.xyz/tags/%E9%9A%90%E5%86%99/">隐写</category></item><item><title>使用Github Actions自动构建Hugo个人博客</title><link>https://10001001.xyz/programming/use-github-actions-building-hugo-blog/</link><guid isPermaLink="true">https://10001001.xyz/programming/use-github-actions-building-hugo-blog/</guid><pubDate>Wed, 14 Jul 2021 20:07:57 +0800</pubDate><author>icheontao@gmail.com (Icheon Tao)</author><copyright>本文在保留作者及链接的前提下，非商业用途随意转载分享。</copyright><description>&lt;p>最近想搭建一个静态网站来记录自己的生活和编程笔记等，本着不折腾的心态选择了&lt;a href="https://github.com/gohugoio/hugo">Hugo&lt;/a>引擎和&lt;a href="https://github.com/reuixiy/hugo-theme-meme">MemE&lt;/a>主题，最后发现还是挺折腾的。所以就记录下搭建过程，希望这篇博客对你有帮助。&lt;/p>
&lt;p>本篇主要内容是使用Github Actions自动构建Hugo+meme的个人博客，并绑定自己的域名。本文默认你熟悉Git。&lt;/p>
&lt;h3 id="部署hugo环境">部署Hugo环境&lt;/h3>
&lt;p>该环境是在&lt;code>Windows 10&lt;/code>上搭建，平时写博客使用的是&lt;code>Visual Studio Code&lt;/code>。&lt;/p>
&lt;h4 id="安装hugo并设置环境变量">安装hugo并设置环境变量&lt;/h4>
&lt;p>在&lt;a href="https://github.com/gohugoio/hugo/releases/">Hugo下载地址&lt;/a>下载你操作系统对应的安装包。&lt;strong>在windows版本上有两个版本:&lt;/strong> &lt;code>Hugo&lt;/code>和&lt;code>Hugo extend&lt;/code>(extend版本支持Sass/SCSS)，根据自己的需要选择版本。笔者因为要使用&lt;code>meme&lt;/code>主题，需使用&lt;code>Hugo extend&lt;/code>。下载并解压到对应的目录，然后将其添加到系统环境变量中即可。&lt;/p>
&lt;p>在cmd窗口中输入&lt;/p>
&lt;pre>&lt;code>hugo version
&lt;/code>&lt;/pre>&lt;p>输出如下类似版本信息即Hugo安装成功&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">hugo v0.85.0-724D5DB5+extended windows/amd64 &lt;span class="nv">BuildDate&lt;/span>&lt;span class="o">=&lt;/span>2021-07-05T10:46:28Z &lt;span class="nv">VendorInfo&lt;/span>&lt;span class="o">=&lt;/span>gohugoio
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="初始化你的站点">初始化你的站点&lt;/h4>
&lt;p>在相应的目录，笔者的目录为&lt;code>C:\programs\MyGit\&lt;/code>下执行，建议使用你域名，如果没有域名，可以使用&lt;code>username.github.io&lt;/code>来创建站点&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="n">hugo&lt;/span> &lt;span class="n">new&lt;/span> &lt;span class="n">site&lt;/span> &lt;span class="n">10001001&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">xyz&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">你站点的名字&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="c"># 使用Git初始化该站点&lt;/span>
&lt;span class="nb">cd &lt;/span>&lt;span class="n">10001001&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">xyz&lt;/span>
&lt;span class="n">git&lt;/span> &lt;span class="n">init&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>进入&lt;code>10001001.xyz&lt;/code>目录查看站点文件信息&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="p">----&lt;/span> &lt;span class="p">-------------&lt;/span> &lt;span class="p">------&lt;/span> &lt;span class="p">----&lt;/span>
&lt;span class="n">d&lt;/span>&lt;span class="p">-----&lt;/span> &lt;span class="n">2021&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">7&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">13&lt;/span> &lt;span class="n">18&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="n">11&lt;/span> &lt;span class="n">archetypes&lt;/span>
&lt;span class="n">d&lt;/span>&lt;span class="p">-----&lt;/span> &lt;span class="n">2021&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">7&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">13&lt;/span> &lt;span class="n">18&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="n">11&lt;/span> &lt;span class="n">content&lt;/span>
&lt;span class="n">d&lt;/span>&lt;span class="p">-----&lt;/span> &lt;span class="n">2021&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">7&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">13&lt;/span> &lt;span class="n">18&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="n">11&lt;/span> &lt;span class="n">data&lt;/span>
&lt;span class="n">d&lt;/span>&lt;span class="p">-----&lt;/span> &lt;span class="n">2021&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">7&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">13&lt;/span> &lt;span class="n">18&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="n">11&lt;/span> &lt;span class="n">layouts&lt;/span>
&lt;span class="n">d&lt;/span>&lt;span class="p">-----&lt;/span> &lt;span class="n">2021&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">7&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">13&lt;/span> &lt;span class="n">18&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="n">11&lt;/span> &lt;span class="n">static&lt;/span>
&lt;span class="n">d&lt;/span>&lt;span class="p">-----&lt;/span> &lt;span class="n">2021&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">7&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">13&lt;/span> &lt;span class="n">18&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="n">11&lt;/span> &lt;span class="n">themes&lt;/span>
&lt;span class="n">-a&lt;/span>&lt;span class="p">----&lt;/span> &lt;span class="n">2021&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">7&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">13&lt;/span> &lt;span class="n">18&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="n">11&lt;/span> &lt;span class="n">82&lt;/span> &lt;span class="n">config&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">toml&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>hugo常用的命令&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">hugo new site path/to/site_name &lt;span class="c1"># 创建站点&lt;/span>
hugo new xxx.md &lt;span class="c1"># 创建md页面&lt;/span>
hugo new dir/xxx.md &lt;span class="c1"># 在目录dir下创建md页面&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="安装站点主题">安装站点主题&lt;/h3>
&lt;p>安装自己喜欢的主题，可以去&lt;a href="https://themes.gohugo.io/">Hugo Themes&lt;/a>和&lt;code>Github&lt;/code>上寻找主题。笔者使用时&lt;code>MemE&lt;/code>极简主题，主题的一般安装步骤就是将你主题下载到站点根目录下的&lt;code>themes&lt;/code>目录下。&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">git submodule add --depth &lt;span class="m">1&lt;/span> https://github.com/reuixiy/hugo-theme-meme.git themes/meme
&lt;/code>&lt;/pre>&lt;/div>&lt;p>再将&lt;code>themes/meme/config-examples/zh-cn/config.toml&lt;/code>文件复制并覆盖站点根目录下的&lt;code>config.toml&lt;/code>，并根据&lt;a href="https://github.com/reuixiy/hugo-theme-meme/blob/master/config-examples/zh-cn/config.tomlthemes/meme/config-examples/zh-cn/config.toml">官方示例配置&lt;/a>来个性化设置自己的站点，你也可以参考本站点的&lt;a href="https://github.com/icheontao/10001001.xyz/blob/main/config.toml">配置&lt;/a>。&lt;/p>
&lt;p>接下来就可以执行&lt;code>hugo server&lt;/code>启动一个服务端（访问地址&lt;code>http://localhost:1313&lt;/code>）并适当修改&lt;code>config.toml&lt;/code>调试站点的布局。&lt;/p>
&lt;p>折腾出自己想要的样式还是需要些时间。&lt;/p>
&lt;h2 id="配置git-actions">配置Git Actions&lt;/h2>
&lt;p>登录你的Github账号，新建仓库，可以使用你域名或者&lt;code>username.github.io&lt;/code>作为你的仓库名。&lt;/p>
&lt;h3 id="配置github-actions">配置Github Actions&lt;/h3>
&lt;p>在你本地站点根目录下新建目录&lt;code>.github/workflows&lt;/code>，并新建一个yml文件，名字无所谓。这里新建一个&lt;code>blog.yml&lt;/code>文件&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">GitHub Pages Deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">branches&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">main &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 需要构建的源代码分支&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Checkout main branch&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/checkout@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">submodules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">fetch-depth&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Setup Hugo&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-hugo@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">hugo-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;0.85.0&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Hugo版本号&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">extended&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 此处配置为 是否适用extend版本，根据自己的主题来定&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build Hugo&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">hugo --minify&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deploy Hugo&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-gh-pages@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">deploy_key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.ACTIONS_DEPLOY_KEY }} &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 此处key需要配置，见文https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-create-ssh-deploy-key&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_branch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">blog &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 自动构建后发布到的分支，此处为自定义&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_dir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./public&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">cname&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10001001.&lt;/span>&lt;span class="l">xyz &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 你域名地址(如果有域名的话，没有则去掉该字段)&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">commit_message&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ github.event.head_commit.message }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>接下来就是编写&lt;code>README.md&lt;/code>和&lt;code>LICENSE&lt;/code>，有了这两个文件才算是一个完整的GIT仓库。可以参考笔者的仓库&lt;a href="https://github.com/icheontao/10001001.xyz">点击查看&lt;/a>。准备提交代码，看看构建效果。&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">git add .
git commit -m &lt;span class="s2">&amp;#34;first commit&amp;#34;&lt;/span>
git branch -M main
&lt;span class="c1"># 设置远程仓库&lt;/span>
git remote add origin https://github.com/icheontao/10001001.xyz.git &lt;span class="c1"># 此处为你仓库地址&lt;/span>
git push -u origin main
&lt;/code>&lt;/pre>&lt;/div>&lt;p>打开仓库地址，点击&lt;code>Actions&lt;/code>，查看构建结果。
&lt;img src="uploads/github_actions.png" alt="Github Actions构建结果">&lt;/p>
&lt;h2 id="配置github-pages">配置Github Pages&lt;/h2>
&lt;p>登录到你的站点Github下，点击 &lt;code>Setttings&lt;/code> -&amp;gt; &lt;code>Pages&lt;/code>进行对应的设置，如下：(标红处是需要注意的地方)
&lt;img src="uploads/github_pages_setting.png" alt="github pages settings">&lt;/p>
&lt;p>&lt;strong>Branch: 为你自定义的git分支；Enforce HTTPS: 为强制开启HTTPS，如果开启的话，需要等待一段时间刷新即可，Github会自动给你生成证书&lt;/strong>&lt;/p>
&lt;h2 id="自定义域名解析可选">自定义域名解析(可选)&lt;/h2>
&lt;p>笔者域名在阿里云，以下步骤都是在阿里云控制台完成。其他厂商可自行登录到域名解析界面操作。&lt;/p>
&lt;p>添加一条&lt;code>CNAME&lt;/code>记录到&lt;code>username.github.io&lt;/code>(username为你github用户名)
并添加&lt;code>A&lt;/code>记录到&lt;code>Github Pages&lt;/code>的IP地址：(至少一个)&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">185.199.108.153
185.199.109.153
185.199.110.153
185.199.111.153
&lt;/code>&lt;/pre>&lt;/div>&lt;p>最后域名解析状态如下:
&lt;img src="uploads/github_pages_setting_2.png" alt="域名解析状态">&lt;/p>
&lt;p>域名解析具体说明见&lt;a href="https://docs.github.com/cn/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site">配置Github Pages站点的自定义域&lt;/a>&lt;/p>
&lt;h2 id="结束">结束&lt;/h2>
&lt;p>最后添加文章，提交github，查看站点&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># 1. 新建md文件&lt;/span>
hugo new xxx.md
&lt;span class="c1"># 2. 编辑文件&lt;/span>
&lt;span class="c1"># 3. 提交代码(由于每次写完都要提交，所以这一步可集成到脚本中，参考见update_pages.sh，在windows上使用Git Bash下运行)&lt;/span>
git add .
git commit -m &lt;span class="s2">&amp;#34;commit msg&amp;#34;&lt;/span>
git push
&lt;span class="c1"># 查看站点&lt;/span>
&lt;span class="c1"># 查看github actions构建是否构建成功，最后就可以看到文章自动构建到你的站点了。&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Enjoy.&lt;/p></description><category domain="https://10001001.xyz/programming/">programming</category><category domain="https://10001001.xyz/tags/%E6%95%99%E7%A8%8B/">教程</category><category domain="https://10001001.xyz/tags/hugo/">hugo</category><category domain="https://10001001.xyz/tags/github-actions/">github actions</category></item></channel></rss>